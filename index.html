<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>DPP on AMD GPUs</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>DPP-code</h1>
        <p>Using DPP on AMD GPUs</p>
        <p class="view"><a href="https://github.com/gpu0/dpp-code">View the Project on GitHub <small>gpu0/dpp-code</small></a></p>
        <ul>
          <li><a href="https://github.com/gpu0/dpp-code/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/gpu0/dpp-code/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/gpu0/dpp-code">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="Introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h3>

<p>
DPP mean Data Parallel Primitives on AMD GPUs. DPPs are used to communicate data between workitems on a SIMD/CU on AMDGPUs. Using LDS for inter work item is the usual way to go but, it can be done better with DPPs. Lets start with permute DPPs. 
</p>
<h4>
Permute Instructions
</h4>
<p>
<code>ds_permute_b32 dest, addr, src </code> This instruction pushes value from index present in <code>addr</code> from <code>src</code> to <code>dest</code>. Here <code>addr</code> acts as index for the operation. Consider <code>|10|20|30|40|</code> as <code>src</code>, <code>|2|2|0|1|</code> as <code>addr</code> doing <code>ds_permute_b32 dest, addr, src</code> makes <code>dest</code> as <code>|30|40|10|-|</code> or <code>|30|40|20|-|</code>. Note that this happens across all 16 lanes (workitems).
</p>

<p>
<code>ds_bpermute_b32 dest, addr, src </code> This instruction pulls value from index present in <code>addr</code> from <code>src</code> to <code>dest</code>. Consider <code>|10|20|30|40|</code> as <code>src</code>, <code>|1|1|1|1|</code> as <code>addr</code> doing <code>ds_bpermute_b32 dest, addr, src</code> makes <code>dest</code> as <code>|20|20|20|20|</code>.
</p>

<h4>
Swizzle Instructions
</h4>
<p>
The swizzle instruction operate in two modes.
1. Quad-Permute Mode
2. Bit-Masks Mode

The ISA goes by <code> ds_swizzle_b32 dest, src offset:ds_pattern </code>
The setting/unsetting 16th bit of <code>ds_pattern</code> switches between different types of swizzle modes.
Quad-Permute Mode moves data between four lanes in a single SIMD.
</p>
<h5>
Quad-Permute Mode
</h5>
<p>
This mode is enabled by setting 16th bit to one.
</p>

<h5>
Bit-Masks Mode
</h5>
<p>
This mode is enabled by setting 16th bit to zero.
</p>

<h3>
<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Designer Templates</h3>

<p>We’ve crafted some handsome templates for you to use. Go ahead and click 'Continue to layouts' to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved.</p>

<h3>
<a id="creating-pages-manually" class="anchor" href="#creating-pages-manually" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Creating pages manually</h3>

<p>If you prefer to not use the automatic generator, push a branch named <code>gh-pages</code> to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.</p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can @mention a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor’s GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://help.github.com/pages">documentation</a> or <a href="https://github.com/contact">contact support</a> and we’ll help you sort it out.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/gpu0">gpu0</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
